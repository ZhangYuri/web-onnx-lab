# 文生图功能说明

## 功能概述

文生图页面是一个基于豆包AI的图像生成工具，用户可以通过输入文字描述来生成精美的图像。

## 主要特性

### 🎨 核心功能
- **文字描述生成图像**：输入详细的文字描述，AI将生成对应的图像
- **参考图片支持**：可选择上传参考图片，让AI基于图片和文字生成新图像
- **多种尺寸选择**：支持1K、2K、4K三种图像尺寸
- **实时预览**：生成后立即预览图像效果

### 🛠️ 用户体验
- **响应式设计**：适配桌面和移动设备
- **实时验证**：输入时实时验证文字描述和图片URL
- **加载状态**：生成过程中显示加载动画
- **错误处理**：友好的错误提示和成功反馈

### 📱 操作功能
- **图片下载**：一键下载生成的图像
- **链接复制**：复制图片URL到剪贴板
- **新窗口预览**：点击图片在新标签页中查看
- **快捷键支持**：Ctrl/Cmd + Enter 快速生成

## 技术架构

### 📁 文件结构
```
client/
├── text-to-image.html          # 主页面
├── src/
│   ├── textToImage.ts          # 主逻辑（支持小说生图）
│   ├── api/
│   │   ├── textToImageApi.ts   # 豆包文生图API服务
│   │   └── deepSeekApi.ts      # DeepSeek文本分析API服务
│   └── components/
│       └── ui.ts               # UI组件
```

### 🔧 核心模块

#### 1. API服务 (`textToImageApi.ts`)
- 封装豆包文生图API调用
- 支持错误处理和重试机制
- 提供输入验证功能

#### 2. UI组件 (`ui.ts`)
- 可复用的UI组件库
- 加载状态管理
- 消息提示系统
- 表单验证工具

#### 3. 主应用 (`textTo-image.ts`)
- 页面逻辑控制
- 事件处理
- 状态管理
- 用户交互

## 使用方法

### 1. 基本使用
1. 在"文字描述"框中输入详细的图像描述
2. 选择图像尺寸（1K/2K/4K）
3. 点击"生成图像"按钮
4. 等待AI生成完成
5. 预览生成的图像

### 2. 使用参考图片
1. 在"参考图片URL"框中输入图片链接
2. 输入文字描述（可选）
3. 点击"生成图像"按钮
4. AI将基于参考图片和文字描述生成新图像

### 3. 图片操作
- **下载图片**：点击"📥 下载图片"按钮
- **复制链接**：点击"📋 复制链接"按钮
- **全屏查看**：点击生成的图片

## API配置

### 接口信息
- **端点**：`https://ark.cn-beijing.volces.com/api/v3/images/generations`
- **模型**：`doubao-seedream-4-0-250828`
- **认证**：Bearer Token

### 请求参数
```json
{
    "model": "doubao-seedream-4-0-250828",
    "prompt": "文字描述",
    "image": "参考图片URL（可选）",
    "size": "图片尺寸（1K/2K/4K）"
}
```

## 开发说明

### 环境要求
- Node.js 16+
- Vite 构建工具
- TypeScript 支持

### 启动开发服务器
```bash
cd client
npm install
npm run dev
```

### 构建生产版本
```bash
npm run build
```

## 注意事项

1. **API限制**：请确保API密钥有效且有足够的配额
2. **网络要求**：需要稳定的网络连接访问豆包API
3. **图片格式**：生成的图片通常为JPG格式
4. **文件大小**：不同尺寸的图片文件大小差异较大

## 故障排除

### 常见问题
1. **生成失败**：检查网络连接和API密钥
2. **图片不显示**：检查图片URL是否有效
3. **下载失败**：确保浏览器支持文件下载功能

### 调试信息
- 打开浏览器开发者工具查看控制台日志
- 检查网络请求状态
- 查看API响应数据

## 更新日志

### v1.0.0
- 初始版本发布
- 支持基本的文生图功能
- 添加图片下载和复制功能
- 实现响应式设计
